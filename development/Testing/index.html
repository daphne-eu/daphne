
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../WriteDocs/">
      
      
      
      <link rel="icon" href="../../assets/logo_small.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.44">
    
    
      
        <title>Testing - DAPHNE</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#testing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="DAPHNE" class="md-header__button md-logo" aria-label="DAPHNE" data-md-component="logo">
      
  <img src="../../assets/logo_small.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DAPHNE
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Testing
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/daphne-eu/daphne" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    daphne-eu/daphne
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../RunningDaphneLocally/" class="md-tabs__link">
          
  
  Users

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../Contributing/" class="md-tabs__link">
          
  
  Developers

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="DAPHNE" class="md-nav__button md-logo" aria-label="DAPHNE" data-md-component="logo">
      
  <img src="../../assets/logo_small.png" alt="logo">

    </a>
    DAPHNE
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/daphne-eu/daphne" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    daphne-eu/daphne
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Home
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../GettingStarted/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GettingStarted
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Users
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Users
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../RunningDaphneLocally/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RunningDaphneLocally
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DaphneDSL
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            DaphneDSL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DaphneDSL/LanguageRef/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LanguageRef
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DaphneDSL/Builtins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Builtins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DaphneDSL/Imports/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Imports
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    DaphneLib
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            DaphneLib
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DaphneLib/Overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DaphneLib/APIRef/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    APIRef
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DaphneLib/Numpy2DaphneLib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Numpy2DaphneLib
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../FileMetaDataFormat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FileMetaDataFormat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DistributedRuntime/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DistributedRuntime
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SchedulingOptions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SchedulingOptions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_8" >
        
          
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/sqlTutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sqlTutorial
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../FPGAconfiguration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FPGAconfiguration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MPI-Usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MPI Usage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Profiling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Profiling
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Developers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Developers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../BuildingDaphne/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BuildingDaphne
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Deploy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ReleaseScripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ReleaseScripts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BinaryFormat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BinaryFormat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ExtendingDistributedRuntime/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ExtendingDistributedRuntime
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ExtendingSchedulingKnobs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ExtendingSchedulingKnobs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../HandlingPRs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HandlingPRs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ImplementBuiltinKernel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ImplementBuiltinKernel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Profiling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Profiling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../WriteDocs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WriteDocs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Testing
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Testing
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#running-the-test-suite" class="md-nav__link">
    <span class="md-ellipsis">
      Running the Test Suite
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Running the Test Suite">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      Background
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-the-test-execution" class="md-nav__link">
    <span class="md-ellipsis">
      Customizing the Test Execution
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customizing the Test Execution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#controlling-which-tests-to-run" class="md-nav__link">
    <span class="md-ellipsis">
      Controlling which Tests to Run
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-useful-flags" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Useful Flags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#daphne-specific-flags" class="md-nav__link">
    <span class="md-ellipsis">
      DAPHNE-specific Flags
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reacting-to-test-failures" class="md-nav__link">
    <span class="md-ellipsis">
      Reacting to Test Failures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reacting to Test Failures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tests-fail-in-your-local-development-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Tests Fail in Your Local Development Environment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tests-fail-in-the-ci-workflow-even-though-they-pass-in-your-local-development-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Tests Fail in the CI Workflow (even though they pass in your local development environment)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-test-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Writing Test Cases
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing Test Cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview-of-the-testing-code" class="md-nav__link">
    <span class="md-ellipsis">
      Overview of the Testing Code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writing-script-level-test-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Writing Script-level Test Cases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writing-unit-test-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Writing Unit Test Cases
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing Unit Test Cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unit-tests-for-kernels" class="md-nav__link">
    <span class="md-ellipsis">
      Unit Tests for Kernels
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limitations-and-outlook" class="md-nav__link">
    <span class="md-ellipsis">
      Limitations and Outlook
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#running-the-test-suite" class="md-nav__link">
    <span class="md-ellipsis">
      Running the Test Suite
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Running the Test Suite">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      Background
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-the-test-execution" class="md-nav__link">
    <span class="md-ellipsis">
      Customizing the Test Execution
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Customizing the Test Execution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#controlling-which-tests-to-run" class="md-nav__link">
    <span class="md-ellipsis">
      Controlling which Tests to Run
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-useful-flags" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Useful Flags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#daphne-specific-flags" class="md-nav__link">
    <span class="md-ellipsis">
      DAPHNE-specific Flags
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reacting-to-test-failures" class="md-nav__link">
    <span class="md-ellipsis">
      Reacting to Test Failures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reacting to Test Failures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tests-fail-in-your-local-development-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Tests Fail in Your Local Development Environment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tests-fail-in-the-ci-workflow-even-though-they-pass-in-your-local-development-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Tests Fail in the CI Workflow (even though they pass in your local development environment)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-test-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Writing Test Cases
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing Test Cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview-of-the-testing-code" class="md-nav__link">
    <span class="md-ellipsis">
      Overview of the Testing Code
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writing-script-level-test-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Writing Script-level Test Cases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#writing-unit-test-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Writing Unit Test Cases
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Writing Unit Test Cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unit-tests-for-kernels" class="md-nav__link">
    <span class="md-ellipsis">
      Unit Tests for Kernels
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limitations-and-outlook" class="md-nav__link">
    <span class="md-ellipsis">
      Limitations and Outlook
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="testing">Testing</h1>
<p>Automatic testing at various levels is an important aspect of any software project.
This document describes how we do testing in DAPHNE.</p>
<p><strong>DAPHNE's testing philosophy</strong> is to mainly focus on end-to-end tests of the entire DAPHNE system, since that is what users care about and what, thus, ultimately matters.
However, as it can be hard to trigger all possible uses of DAPHNE's internal C++ components from <a href="/daphne/DaphneDSL/LanguageRef">DaphneDSL</a> or <a href="/daphne/DaphneLib/Overview">DaphneLib</a> scripts, we also test some of those components in isolation.</p>
<p>Thus, there are <strong>two kinds of test cases</strong> in DAPHNE:</p>
<ol>
<li><em>Script-level test cases</em>, which invoke the entire DAPHNE system with some input script file.</li>
<li><em>Unit test cases</em>, which use individual C++ functions/classes of the DAPHNE source code.</li>
</ol>
<p>Both kinds of test cases are expressed using <a href="https://github.com/catchorg/Catch2">catch2</a>, a widely used C++ <strong>testing framework</strong>.
We use catch2 such that we don't need to reinvent the wheel for C++ testing (plus, learning about catch2 can help DAPHNE developers also in other software projects).
Reading the <a href="https://github.com/catchorg/Catch2/blob/devel/docs/tutorial.md">catch2 documentation</a> is very worthwhile to better understand testing in DAPHNE.
We use the same way to define tests for both script-level and unit tests to ensure a consistent test format and a unified test summary.</p>
<p>The test suite should be run by developers before committing any changes.
To ensure that the code base passes the tests, the test suite is run as part of DAPHNE's CI workflows on GitHub for every commit on the main branch and every pull request to the main branch.</p>
<h2 id="running-the-test-suite">Running the Test Suite</h2>
<p>To run the test suite, execute DAPHNE's <strong>test script</strong> from the DAPHNE root directory as follows:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># If you built the dependencies yourself (typical in a native environment):</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>./test.sh
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1"># If you want to use pre-built dependencies (typical in a DAPHNE container):</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>./build.sh<span class="w"> </span>--no-deps<span class="w"> </span>--target<span class="w"> </span>run_tests<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>./test.sh<span class="w"> </span>-nb
</code></pre></div>
<p>Ideally, the output looks as follows (the concrete numbers may have changed):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>===============================================================================
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>All tests passed (416199 assertions in 1580 test cases)
</code></pre></div>
<h3 id="background">Background</h3>
<p>We try to make running the test suite as simple as possible in the standard case.
For that purpose, we provide a test script <code>test.sh</code>, which (1) builds virtually all DAPHNE targets, including the test executable <code>run_tests</code> (a catch2 executable), (2) sets up some environment variables, (3) handles a few DAPHNE-specific options, and (4) invokes the test executable.
Due to this sequence of actions, invoking the test executable <code>run_tests</code> directly is discouraged.</p>
<h3 id="customizing-the-test-execution">Customizing the Test Execution</h3>
<p>The test execution can be controlled in several ways.
On the one hand, <em>all</em> <a href="https://github.com/catchorg/Catch2/blob/devel/docs/command-line.md">catch2 arguments</a> are supported, which already yields quite some flexibility (below, we only comment on the most useful ones in DAPHNE).
On the other hand, there a few DAPHNE-specific options.
Both kinds of options can simply be added after <code>test.sh</code> and can be freely mixed.</p>
<h4 id="controlling-which-tests-to-run">Controlling which Tests to Run</h4>
<p>The set of test cases to run can be tailored in a fine-grained way, and we completely rely on catch2's features here.
Each test case has a <em>name</em> and one or multiple <em>tags</em> (think of groups/categories of test cases).</p>
<ul>
<li>
<p><strong>Run all test cases:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>./test.sh
</code></pre></div>
<p>If nothing special is specified, all test cases are run.</p>
</li>
<li>
<p><strong>Run a specific test case:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>./test.sh<span class="w"> </span>kmeans
</code></pre></div>
<p>As our test case names often have slightly technical-looking suffixes (due to <code>TEMPLATE_TEST_CASE</code> and <code>TEMPLATE_PRODUCT_TEST_CASE</code>, see below), it is quite handy to use wildcards:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>./test.sh<span class="w"> </span>matmul*
</code></pre></div>
</li>
<li>
<p><strong>Run all test cases with a specific tag:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>./test.sh<span class="w"> </span><span class="o">[</span>algorithms<span class="o">]</span>
</code></pre></div>
<p>A list of all test tags can be found in <a href="https://github.com/daphne-eu/daphne/tree/main/test/tags.h"><code>test/tags.h</code></a>.</p>
</li>
<li>
<p>catch2 also supports <strong>complex combinations and set operations</strong> on test names and tags.
    See the <a href="https://github.com/catchorg/Catch2/blob/devel/docs/command-line.md#specifying-which-tests-to-run">catch2 documentation</a> for details.</p>
</li>
</ul>
<h4 id="additional-useful-flags">Additional Useful Flags</h4>
<p>See the <a href="https://github.com/catchorg/Catch2/blob/devel/docs/command-line.md">catch2 documentation</a> for a full reference of all command-line arguments.</p>
<ul>
<li>
<p><strong>Show the progress of the test execution:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>./test.sh<span class="w"> </span>-d<span class="w"> </span>yes
</code></pre></div>
<p>By this catch2 flag, the duration of each test is displayed, which also means some progress indication.</p>
</li>
</ul>
<h4 id="daphne-specific-flags">DAPHNE-specific Flags</h4>
<p>The test script has several flags that control how the DAPHNE system and the test executable are built through the build script <code>build.sh</code>.</p>
<ul>
<li><code>--cuda</code>, <code>--fpgaopencl</code>, and <code>--mpi</code> switch on the respective feature of DAPHNE.</li>
<li><code>--no-papi</code> switch off the respective feature of DAPHNE.</li>
<li><code>--debug</code> builds DAPHNE with debug information.</li>
<li><code>-nb</code> or <code>--no-build</code> builds DAPHNE with pre-compiled dependencies (available in the DAPHNE containers).</li>
</ul>
<p>These flags are merely forwarded to <code>build.sh</code>.
Further information can be found there.</p>
<h3 id="reacting-to-test-failures">Reacting to Test Failures</h3>
<h4 id="tests-fail-in-your-local-development-environment">Tests Fail in Your Local Development Environment</h4>
<p>Finding out what's going wrong and how to fix it requires the typical debugging skills, where most developers have their own ways and preferences.</p>
<p>Some suggestions in the context of DAPHNE:</p>
<ul>
<li>Look at the error messages produced by catch2, which indicate the name of the failing test case as well as the assertions that failed (including detailed information like the expected and found values). This output is often sufficient to narrow down the problem.</li>
<li>Try to change the code and/or the test case and execute only the affected test case separately (see above) to save time. For script-level test cases, it can be helpful to invoke the script outside the test suite (the scripts typically reside in <code>test/api/cli/</code>, make sure to use the same arguments as in the test suite).</li>
<li>Use <a href="/daphne/development/Logging">DAPHNE's logger</a> or custom print-outs to generate more debug output.</li>
<li>Use a debugger.</li>
</ul>
<h4 id="tests-fail-in-the-ci-workflow-even-though-they-pass-in-your-local-development-environment">Tests Fail in the CI Workflow (even though they pass in your local development environment)</h4>
<p>Unfortunately, this can happen.
<strong>Possible reasons</strong> include:</p>
<ul>
<li>
<p><strong>Differences in the software setups of your system and the CI system.</strong>
    The CI machine may have a different OS (version), C++ compiler (version), installed software packages (versions), etc.
    You can try to debug the failing tests in the CI's <em>OS/software</em> environment by using the CI container image as follows:</p>
<p><em>On the host (from the DAPHNE root directory):</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>docker<span class="w"> </span>pull<span class="w"> </span>daphneeu/github-action
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--rm<span class="w"> </span>-w<span class="w"> </span>/daphne<span class="w"> </span>-v<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">:/daphne&quot;</span><span class="w"> </span>daphneeu/github-action:latest<span class="w"> </span>bash
</code></pre></div>
<p><em>In the container:</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1"># To avoid cmake complaints.</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>./build.sh<span class="w"> </span>--clean<span class="w"> </span>-y
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="c1"># Build the test cases (effectively all targets) using pre-built dependencies.</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>./build.sh<span class="w"> </span>--no-deps<span class="w"> </span>--target<span class="w"> </span>run_tests
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="c1"># Run the tests and print which test is running.</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>./test.sh<span class="w"> </span>-nb<span class="w"> </span>-d<span class="w"> </span>yes
</code></pre></div>
<p>If the test failures cannot be reproduced that way, they are most likely not due to OS/software environment reasons.</p>
</li>
<li>
<p><strong>Differences in the hardware setups of your system and the CI system.</strong>
    The CI machine may have a different processor model, a different number of physical/virtual cores, a different memory/disk capacity etc.
    These differences could potentially have an impact on race conditions, the numerical stability of results, etc.
    Ideally, DAPHNE should behave well in a reasonable range of hardware setups.</p>
</li>
</ul>
<h2 id="writing-test-cases">Writing Test Cases</h2>
<h3 id="overview-of-the-testing-code">Overview of the Testing Code</h3>
<p>All testing code resides in the directory <code>test/</code>.
The subdirectories of <code>test/</code> are (almost) the same as those of the source code directory <code>src/</code> and contain the test cases for the respective parts of the code base.</p>
<ul>
<li><code>test/</code><ul>
<li><code>api/</code>: all script-level test cases<ul>
<li><code>cli/</code>: command-line use of DAPHNE (DaphneDSL scripts)</li>
<li><code>python</code>: Python API use of DAPHNE (DaphneLib Python scripts)</li>
</ul>
</li>
<li><code>data/</code>: data sets to be used in script-level test cases</li>
<li><code>codegen/</code>, <code>ir/</code>, <code>parser/</code>, <code>runtime/</code> (all remaining subdirectories): all unit test cases</li>
<li><code>CMakeLists.txt</code>: list of all <code>cpp</code>-files containing test cases</li>
<li><code>run_tests.h</code>/<code>.cpp</code>: source code of the test executable <code>run_tests</code> (including the catch2 main function), <em>rarely needs editing</em></li>
<li><code>tags.h</code>: list of all test case tags</li>
</ul>
</li>
</ul>
<p>In the following, we give an <strong>overview on writing test cases</strong> in DAPHNE.
The main goal is to enable developers to understand the way we write test cases in DAPHNE, rather than providing a detailed tutorial.
<strong><em>There is already a multitude of existing test cases that can serve as concrete examples to learn from.</em></strong></p>
<p><strong>To add a new test case</strong>, first identify the right spot in the directory hierarchy.
Then, either create a new <code>*Test.cpp</code>-file (and add it to <code>test/CMakeLists.txt</code>) or extend an existing one.
Within this <code>*Test.cpp</code>-file, you can add any logic required to perform your test, including helper functions etc.
Create the individual <a href="https://github.com/catchorg/Catch2/blob/devel/docs/test-cases-and-sections.md">catch2 test cases</a> with macros like <code>TEST_CASE</code>, <code>TEMPLATE_TEST_CASE</code> and <code>TEMPLATE_PRODUCT_TEST_CASE</code>.
Inside a test case, you can implement whatever you need to (a) set up the test fixture, (b) invoke the components to test, and (c) free any allocated resources.
While test cases can be totally custom, we comment on frequent cases below.</p>
<h3 id="writing-script-level-test-cases">Writing Script-level Test Cases</h3>
<p><strong>Script-level test cases</strong> test the end-to-end use of DAPHNE by invoking DaphneDSL or DaphneLib scripts like users do.
That way, we can involve the entire DAPHNE parser, compiler, and runtime stack into the test case.
To that end, we invoke the <code>daphne</code> executable (DaphneDSL scripts) or <code>python3</code> (DaphneLib scripts) as separate processes from our C++ test cases, pass them all required arguments, and capture their status code as well as their output to <code>stdout</code> and <code>stderr</code>.
We typically check if a given DaphneDSL/DaphneLib script:</p>
<ol>
<li>parses, compiles, and executes successfully (or fails in the expected way) (status code)</li>
<li>yields the expected output (<code>stdout</code> and <code>stderr</code>)</li>
</ol>
<p>We offer a <strong>hierarchy of utilities</strong> for common tasks in <code>test/api/cli/Utils.h</code>/<code>.cpp</code>.
These utilities work at slightly different abstraction levels.
In case there is no utility function that exactly solves your case, you can still compose the lower-level utlities.
In the following, we list just the most important ones, see the mentioned file for a detailed reference.</p>
<ul>
<li>
<p><strong><code>runProgram</code></strong><code>(std::stringstream &amp; out, std::stringstream &amp; err, const char * execPath, Args ... args)</code></p>
<p>Executes the specified program with the given arguments and captures <code>stdout</code>, <code>stderr</code>, and the status code.</p>
<p>This is the basis for the other utility functions.</p>
</li>
<li>
<p><strong><code>runDaphne</code></strong><code>(std::stringstream &amp; out, std::stringstream &amp; err, Args ... args)</code></p>
<p>Executes DAPHNE's command line interface with the given arguments and captures <code>stdout</code>, <code>stderr</code>, and the status code.</p>
</li>
<li>
<p><strong><code>runDaphneLib</code></strong><code>(std::stringstream &amp; out, std::stringstream &amp; err, const char * scriptPath, Args ... args)</code></p>
<p>Executes the given Python script with the <code>python3</code> interpreter and captures <code>stdout</code>, <code>stderr</code>, and the status code.</p>
</li>
<li>
<p><strong><code>runLIT</code></strong><code>(std::stringstream &amp;out, std::stringstream &amp;err, std::string dirPath,            Args... args)</code></p>
<p>Executes the "run-lit.py" Python script in a directory and captures <code>stdout</code>, <code>stderr</code>, and the status code.</p>
<p>Used for tests of <code>mlir</code>-files.</p>
</li>
<li>
<p><strong><code>checkDaphneStatusCode</code></strong><code>(StatusCode exp, const std::string &amp; scriptFilePath, Args ... args)</code></p>
<p>Checks whether executing the given DaphneDSL script with the command line interface of DAPHNE returns the given status code.</p>
</li>
<li>
<p><strong><code>checkDaphneFails</code></strong><code>(const std::string &amp; scriptFilePath, Args ... args)</code></p>
<p>Checks whether executing the given DaphneDSL script with the command line interface of DAPHNE fails.</p>
</li>
<li>
<p><strong><code>compareDaphneToStr</code></strong><code>(const std::string &amp; exp, const std::string &amp; scriptFilePath, Args ... args)</code></p>
<p>Compares the standard output of executing the given DaphneDSL script with the command line interface of DAPHNE to a reference text.</p>
</li>
<li>
<p><strong><code>compareDaphneToRef</code></strong><code>(const std::string &amp; refFilePath, const std::string &amp; scriptFilePath, Args ... args)</code></p>
<p>Compares the standard output of executing the given DaphneDSL script with the command line interface of DAPHNE to a reference text file.</p>
</li>
<li>
<p><strong><code>compareDaphneToDaphneLib</code></strong><code>(const std::string &amp; pythonScriptFilePath, const std::string &amp; daphneDSLScriptFilePath, Args ... args)</code></p>
<p>Compares the standard output of the given DaphneDSL script with that of the given Python/DaphneLib script.</p>
</li>
<li>
<p><strong><code>compareDaphneToSelfRef</code></strong><code>(const std::string &amp;expScriptFilePath, const std::string &amp;actScriptFilePath, Args ... args)</code></p>
<p>Compares the standard output of executing a given DaphneDSL script with the command line interface of DAPHNE to a (simpler) DaphneDSL script defining the expected behavior.</p>
</li>
</ul>
<p><strong>Some more hints:</strong></p>
<ul>
<li>The <code>.cpp</code>-files of the DaphneDSL script-level test cases often define macros like <code>MAKE_TEST_CASE</code> and <code>MAKE_FAILURE_TEST_CASE</code>. These wrap the test case creation such that we can easily create families of similar test cases.</li>
<li>Many of the script-level test cases have no highly descriptive names as that would be cumbersome. Instead, they are typically numbered. In that context, several of the utility functions mentioned above have a variant suffixed with <code>Simple</code> (e.g., <code>compareDaphneToRefSimple()</code>), which assumes a certain naming scheme of the test cases.</li>
<li>Please put a comment line at the top of each DaphneDSL/DaphneLib script used in a script-level test case that briefly explains what is being tested. Note that the purpose of the test is otherwise not always obvious. Putting a comment helps to keep the test case up-to-date when the DAPHNE system changes.</li>
<li>When using hand-written reference text files (e.g., with <code>compareDaphneToRef()</code>), note that there usually needs to be a newline at the end of the text file, as the DAPHNE output typically also ends with a newline. Otherwise, the test case fails even though the actual and expected outputs look quite similar at first glance.</li>
</ul>
<h3 id="writing-unit-test-cases">Writing Unit Test Cases</h3>
<p>Unit test cases invoke individual C++ components of DAPHNE in isolation to test their behavior in various situations.
We use unit tests mainly for internal data structures, kernels, file readers/writers, as well as some pieces of the DAPHNE compiler.</p>
<h4 id="unit-tests-for-kernels">Unit Tests for Kernels</h4>
<p>Unit tests for kernels are the most frequent kind of unit test case in DAPHNE.
These tests reside in <code>test/runtime/local/kernels/</code>.
For each DaphneIR operation <code>Xyz</code> (i.e., per <code>Xyz.h</code> in <code>src/runtime/local/kernels/</code>), there is one <code>XyzTest.cpp</code>-file.
<a href="/daphne/development/ImplementBuiltinKernel">DAPHNE's kernels</a> make extensive use of C++ template metaprogramming.
Thus, the test cases are usually defined by catch2's <code>TEMPLATE_TEST_CASE</code> or <code>TEMPLATE_PRODUCT_TEST_CASE</code>, but some also use the plain <code>TEST_CASE</code>.</p>
<p>The <strong>typical structure</strong> of a unit test case for a kernel is as follows:</p>
<ol>
<li><em>Define multiple pairs of inputs and expected outputs.</em> These should include various regular and corner cases as well as cases with invalid arguments. <a href="https://github.com/catchorg/Catch2/blob/devel/docs/test-cases-and-sections.md">catch2 SECTION</a>s can be used to define such cases very concisely, with minimal code duplication.</li>
<li><em>Call the kernel under test as a C++ function</em> with the given inputs and obtain the outputs.</li>
<li><em>Compare the actual and expected outputs.</em> To this end, catch2 offers various <a href="https://github.com/catchorg/Catch2/blob/devel/docs/assertions.md">assertion macros</a>, such as <code>CHECK</code>, <code>REQUIRE</code>, <code>CHECK_FALSE</code>, <code>CHECK_THROWS</code> etc. In DAPHNE, the <code>==</code> operator can be used to compare entire DAPHNE matrices and frames, e.g., <code>*exp == *res</code>. The <code>checkEqApprox</code>-kernel can be used to take floating-point round-off errors into account when comparing DAPHNE data objects.</li>
<li><em>Destroy all created data objects exactly once</em> using <code>DataObjectFactory::destroy()</code>.</li>
</ol>
<p>For steps 2 and 3, we often employ a separate <code>checkXyz()</code> helper function.</p>
<p><strong>Some more hints:</strong></p>
<ul>
<li>Don't encode the types provided by <code>TEMPLATE_TEST_CASE</code> and <code>TEMPLATE_PRODUCT_TEST_CASE</code> in the test name manually; catch2 appends them automatically.</li>
<li>The type of a particular instantiation of a <code>TEMPLATE_TEST_CASE</code> or <code>TEMPLATE_PRODUCT_TEST_CASE</code> is available as <code>TestType</code> within the test case. DAPHNE matrices further expose their value type as a member type <code>VT</code> (e.g., <code>TestType::VT</code>) and offer <code>withValueType&lt;VT&gt;</code> as a utility for getting the same data type with a different value type (e.g., <code>TestType::WithValueType&lt;double&gt;</code>). Furthermore, utilities from the STL header <code>&lt;type_traits&gt;</code> can be very helpful to manipulate C++ types.</li>
<li>Small test matrices with hardcoded elements can easily be created by <code>genGivenVals()</code> (see <code>src/runtime/datagen/GenGivenVals.h</code>).</li>
<li>All kernels (except for <code>createDaphneContext</code>) expect a <code>DaphneContext</code> as their last parameter. In the context of an invocation of the <code>daphne</code> executable, the <code>DaphneContext</code> is normally provided by the DAPHNE compiler/runtime. In unit test cases, it is typically fine to simply pass a <code>nullptr</code> as the context.</li>
<li>Try to write the checks in a way such that catch2 produces helpful outputs in case of a failure. For instance, to check if a string <code>s</code> is empty, don't use <code>CHECK(s.empty())</code>, but rather do <code>CHECK(s == "")</code>, since the latter will include the contents of <code>s</code> in the failure indication, which is usually quite helpful. Furthermore, be aware that <code>REQUIRE</code> stops the test case execution on a failure, which also means that the following checks (which might produce helpful error indications) are not performed. Thus, consider using <code>CHECK</code> instead and use <code>REQUIRE</code> only when the following checks would not even be well-defined (e.g., you could require that something is not a <code>nullptr</code>).</li>
</ul>
<h2 id="limitations-and-outlook">Limitations and Outlook</h2>
<p>DAPHNE's test suite is continuously under development and contributions are always welcome.
Open topics include, but are not limited to:</p>
<ul>
<li><strong>Better test coverage</strong><ul>
<li><em>Unit tests for kernels:</em><ul>
<li>Systematic tests with view as inputs</li>
<li>Systematic tests with zero-row/column inputs</li>
<li>Systematic tests with invalid inputs</li>
</ul>
</li>
<li><em>Script-level tests</em><ul>
<li>Systematic tests with all combinations of arguments</li>
<li>DSL fuzzing for testing a multitude of valid DaphneDSL/DaphneLib scripts</li>
</ul>
</li>
</ul>
</li>
<li><strong>Comparison to baseline systems</strong> to check correctness for complex scripts beyond hand-written expected results</li>
<li><strong>Performance regression tests</strong> (see #208)</li>
<li><strong>Specification of test cases</strong>: more concise ways, especially for many small script-level test cases</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.tabs", "navigation.tabs.sticky"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>