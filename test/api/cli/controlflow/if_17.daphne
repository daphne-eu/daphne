// Update a list inside then-branch and else-branch of if-statement with values computed outside if-statement (scf.if gets rewritten to arith.select).
X = createList([0]);
Y = append(X, [1]);
Z = append(X, [2]);
# r must be unknown at compile-time (otherwise, the entire "if" gets optimized away)
# TODO The rand() might get optimized away at some point in the future (but not at the moment), because the result is clear.
r = as.scalar(rand(1, 1, 0, 1, 1, -1));
if(r)
    X = Y;
else
    X = Z;
print(X);