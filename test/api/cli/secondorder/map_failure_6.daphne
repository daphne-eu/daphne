// udfReturnsScalar doesn't match actual UDF result

def sumOfFirstAndLast(row) {
  return as.scalar<f64>(row[0, 0]) + as.scalar<f64>(row[0, ncol(row) - 1]);
}

X = reshape([1, 2, 3], 1, 3);
print(map(X, sumOfFirstAndLast, 0, false));