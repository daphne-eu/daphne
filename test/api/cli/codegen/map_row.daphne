// Performs a MapOp with the UDF `sumOfFirstAndLast`. Used to compare precompiled
// kernel with codegen.

def sumOfFirstAndLast(row:matrix<f64>) -> f64 {
  return as.scalar(row[0, 0]) + as.scalar(row[0, 2]); //ncol(row) â€“ 1
}

X = reshape([1.1, 0.0, 3.0, 5.5, -2.2, -1.2], 2, 3);

print(map(X, sumOfFirstAndLast, 0));
